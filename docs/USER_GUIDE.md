# 用户指南

欢迎使用 chifanzuiyaojin！本指南将帮助您快速上手并充分利用本项目的所有功能。

## 目录

1. [快速开始](#快速开始)
2. [功能介绍](#功能介绍)
3. [详细使用说明](#详细使用说明)
4. [最佳实践](#最佳实践)
5. [常见问题](#常见问题)
6. [故障排除](#故障排除)

---

## 快速开始

### 环境要求

- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **网络**: 需要稳定的互联网连接
- **API Key**: 需要 Alibaba DashScope API Key

### 获取 API Key

1. 访问 [Alibaba Cloud DashScope](https://dashscope.aliyun.com/)
2. 注册并登录账号
3. 创建 API Key
4. 在应用的"配置"选项卡中输入您的 API Key

### 启动应用

#### 使用 Docker（推荐）

```bash
# 克隆项目
git clone https://github.com/xuduiAlgo/chifanzuiyaojin.git
cd chifanzuiyaojin

# 启动生产环境
docker-compose up -d

# 启动开发环境
docker-compose --profile dev up -d
```

#### 使用本地 Python

```bash
# 安装依赖
pip install -r requirements.txt

# 启动服务器
python server.py
```

访问 `http://localhost:5173` 开始使用。

---

## 功能介绍

chifanzuiyaojin 是一个多功能的内容处理平台，主要包含以下功能：

### 1. 文本转语音 (TTS)
将文本转换为高质量的语音音频。

### 2. 语音识别 (ASR)
将音频文件转换为文本和字幕。

### 3. OCR 文字识别
从图片中提取文字内容。

### 4. AI 作文润色
获取专业的作文润色建议和升格示例。

### 5. 文本分析
分析文本的关键词、摘要和主题。

### 6. 文档导出
支持导出为 Word、PDF、SRT 等多种格式。

---

## 详细使用说明

### 文本转语音 (TTS)

1. **输入文本**
   - 在"文本"输入框中输入或粘贴要转换的文本
   - 支持最多 10,000 字

2. **选择语音**
   - 从下拉菜单选择语音类型
   - 选择"指令语音"时，可输入提示词

3. **配置输出**
   - 可自定义输出文件名
   - 默认格式为 WAV

4. **生成语音**
   - 点击"生成语音"按钮
   - 等待处理完成（通常 10-30 秒）

5. **使用结果**
   - 在音频播放器中预览
   - 点击"下载"保存到本地
   - 查看高亮的字幕文本

### 语音识别 (ASR)

1. **上传文件**
   - 支持音频文件：MP3, WAV, M4A, OGG
   - 支持视频文件：MP4, MKV, AVI
   - 建议文件大小小于 100MB

2. **开始转写**
   - 点击"开始转写"按钮
   - 等待转写完成（时间取决于文件长度）

3. **查看结果**
   - 在"转写文本"中查看完整文本
   - 在"交互式字幕"中点击字幕跳转到对应时间点
   - 查看自动提取的关键词、摘要和主题

4. **导出结果**
   - 支持导出为 Word 文档
   - 使用"导出管理器"导出多种字幕格式

### OCR 文字识别

1. **添加图片**
   - 点击"添加文件"选择图片
   - 支持格式：JPG, PNG, GIF, BMP
   - 单个文件限制 4MB
   - 最多支持 10 个文件

2. **管理文件**
   - 查看已添加的文件列表
   - 点击"清空"移除所有文件

3. **开始识别**
   - 点击"开始转换"
   - 等待识别完成

4. **编辑结果**
   - 在文本区域查看识别结果
   - 手动编辑修正识别错误

5. **生成 Word**
   - 点击"保存并生成 Word 文档"
   - 下载生成的 Word 文件

### AI 作文润色

1. **准备文本**
   - 先通过 OCR 识别或直接输入作文内容
   - 确保文本在"OCR 结果"文本框中

2. **使用预设提示词**
   - 点击"中考阅卷专家组"获取综合评价
   - 点击"结构分析"获取结构建议
   - 点击"语言润色"获取润色建议

3. **使用自定义提示词**
   - 在"自定义提示词"输入框中输入你的要求
   - 点击"输入修改prompt建议"

4. **查看建议**
   - 浏览总体评价和评分预测
   - 查看结构建议和多维构思拓展
   - 阅读细节润色建议和升格示例
   - 查看三种风格的润色示范

5. **导出建议**
   - 点击"导出建议为 Word"
   - 下载包含所有建议的 Word 文档

### 文本分析

1. **自动分析**
   - 生成语音后自动触发文本分析
   - 或点击"重新分析"按钮手动触发

2. **查看结果**
   - **关键词**：提取出的核心关键词
   - **摘要**：文本的简要概括
   - **主题**：文本的主要主题，点击可跳转到对应音频位置

### 文档导出

#### 使用导出管理器

1. 导出 `ExportManager` 模块
2. 创建导出菜单：
   ```javascript
   const container = document.getElementById('export-container');
   ExportManager.createExportMenu(subtitles, container, 'myfile');
   ```

3. 选择要导出的格式：
   - **SRT**: 标准字幕格式
   - **VTT**: Web 字幕格式
   - **ASS**: 高级字幕格式
   - **TXT**: 纯文本
   - **JSON**: 结构化数据
   - **CSV**: 表格格式
   - **DOCX**: Word 文档
   - **PDF**: PDF 文档

4. 点击"批量导出全部格式"一次性导出所有格式

---

## 最佳实践

### 优化 TTS 效果

1. **文本预处理**
   - 添加适当的标点符号
   - 使用分段符控制停顿
   - 避免过长的句子（建议每句不超过 50 字）

2. **语音选择**
   - 朗读新闻使用标准语音
   - 小说朗读使用情感语音
   - 需要特殊语气使用指令语音

3. **批量处理**
   - 利用缓存机制避免重复生成
   - 合理安排生成顺序

### 提高 ASR 准确率

1. **音频质量**
   - 使用高质量的音频源
   - 避免背景噪音
   - 确保音量适中

2. **文件准备**
   - 转换前检查音频完整性
   - 大文件建议分段处理
   - 使用常见音频格式

3. **结果校对**
   - 利用交互式字幕快速定位
   - 对识别错误进行手动修正
   - 导出前仔细检查

### OCR 优化建议

1. **图片质量**
   - 使用高分辨率图片（建议 300 DPI 以上）
   - 确保文字清晰可读
   - 避免倾斜和模糊

2. **批量处理**
   - 一次上传相关联的图片
   - 按顺序排列页面
   - 处理后立即检查结果

3. **结果编辑**
   - 及时识别和修正错误
   - 保留原文档的格式
   - 添加适当的标点符号

### AI 作文润色使用技巧

1. **明确需求**
   - 使用清晰具体的提示词
   - 指明目标读者（如：中考阅卷老师）
   - 说明期望的风格和水平

2. **迭代改进**
   - 先获取综合评价
   - 根据建议修改后再重新分析
   - 对比不同风格的效果

3. **学习提升**
   - 仔细阅读升格示例
   - 学习推荐的表达方式
   - 积累优秀的写作技巧

---

## 常见问题

### Q1: API Key 如何获取？

A: 访问 Alibaba Cloud DashScope 控制台，注册账号后即可创建 API Key。

### Q2: 生成音频需要多长时间？

A: 通常 10-30 秒，取决于文本长度和网络状况。

### Q3: 支持哪些文件格式？

- **TTS**: 无，直接输入文本
- **ASR**: MP3, WAV, M4A, OGG, MP4, MKV, AVI
- **OCR**: JPG, PNG, GIF, BMP

### Q4: 文件大小有限制吗？

- **TTS**: 文本最多 10,000 字
- **ASR**: 建议小于 100MB
- **OCR**: 单个文件 4MB，最多 10 个文件

### Q5: 如何提高识别准确率？

- 使用高质量的源文件
- 确保良好的网络连接
- 对结果进行人工校对

### Q6: 生成的文件保存在哪里？

所有生成的文件保存在 `tts_output` 目录中。

### Q7: 可以批量处理吗？

是的，支持批量 OCR 识别和批量导出多种格式。

### Q8: 离线可以使用吗？

部分功能需要联网访问 Alibaba Cloud API，无法完全离线使用。

### Q9: 如何保护 API Key？

建议通过环境变量配置，不要在代码中硬编码。

### Q10: 支持多语言吗？

目前主要支持中文和英文。

---

## 故障排除

### 问题 1: "请先配置 Alibaba DashScope Key"

**解决方案**
1. 在应用的"配置"选项卡中输入有效的 API Key
2. 检查 API Key 是否正确复制
3. 确认 API Key 没有过期

### 问题 2: "网络连接失败"

**解决方案**
1. 检查网络连接是否正常
2. 尝试刷新页面
3. 检查防火墙设置
4. 确认服务器是否正常运行

### 问题 3: "文件大小超过限制"

**解决方案**
1. 压缩文件大小
2. 分割大文件为多个小文件
3. 使用更高效的编码格式

### 问题 4: "识别结果不准确"

**解决方案**
1. 提高源文件质量
2. 使用更清晰的图片或音频
3. 手动校对和修正结果

### 问题 5: "生成音频失败"

**解决方案**
1. 检查文本内容是否包含特殊字符
2. 尝试缩短文本长度
3. 选择不同的语音类型
4. 查看浏览器控制台错误信息

### 问题 6: 页面加载缓慢

**解决方案**
1. 检查网络速度
2. 清除浏览器缓存
3. 使用最新版本的浏览器
4. 关闭其他占用带宽的应用

### 问题 7: 无法播放音频

**解决方案**
1. 检查浏览器是否支持音频播放
2. 更新浏览器到最新版本
3. 尝试下载音频文件到本地播放
4. 检查系统音量设置

---

## 技术支持

如果以上解决方案无法解决您的问题：

1. 查看 [API 文档](./API.md)
2. 提交 [GitHub Issue](https://github.com/xuduiAlgo/chifanzuiyaojin/issues)
3. 联系技术支持团队

---

## 更新日志

- **2026-01-12**: 添加导出管理器和缓存机制
- **2026-01-12**: 优化错误处理和进度指示
- **2026-01-12**: 改进 Docker 配置和生产部署支持
